import{_ as C,o as d,c,a as p,d as t,F as h,f as g,g as f,t as n,h as x,v as m}from"./index-ec9bea5f.js";const{VITE_APP_URL:r,VITE_APP_PATH:i}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_APP_PATH:"helena27",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},v={data(){return{products:[],productId:"",cart:[],loadingItem:""}},methods:{getCarts(){this.$http.get(`${r}api/${i}/cart`).then(e=>{this.cart=e.data.data,console.log("取得購物車",e.data.data)})},updateCart(e){this.loadingItem=e.id;const l={product_id:e.product.id,qty:e.qty};console.log(l,e.id),this.$http.put(`${r}api/${i}/cart/${e.id}`,{data:l}).then(u=>{console.log("更新購物車",u.data),this.getCarts(),this.loadingItem=""})},removeCartItem(e){this.loadingItem=e.id,this.$http.delete(`${r}/v2/api/${i}/cart/${e.id}`).then(l=>{alert("刪除單一購物車成功"),console.log("刪除單一購物車",l.data),this.getCarts(),this.loadingItem=""})},deleteAllCarts(){this.$http.delete(`${r}/v2/api/${i}/carts`).then(e=>{alert("刪除全部購物車成功"),console.log("刪除全部購物車",e.data),this.getCarts()})}},mounted(){this.getCarts()}},I={class:"table align-middle"},b=t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",{class:"text-end"},"單價")])],-1),$=["onClick","disabled"],y=t("i",{class:"fas fa-spinner fa-pulse"},null,-1),P={class:"input-group input-group-sm"},V=["onUpdate:modelValue","onChange","disabled"],A=["value"],E={class:"text-end"},k=t("td",{colspan:"3",class:"text-end"},"總計",-1),T={class:"text-end"},D=t("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),R={class:"text-end text-success"};function S(e,l,u,U,o,_){return d(),c(h,null,[p(" 這是購物車 "),t("table",I,[b,t("tbody",null,[o.cart.carts?(d(!0),c(h,{key:0},g(o.cart.carts,s=>(d(),c("tr",{key:s.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:a=>_.removeCartItem(s),disabled:s.id===o.loadingItem.id},[y,p(" x ")],8,$)]),t("td",null,n(s.product.title)+" ",1),t("td",null,[t("div",P,[x(t("select",{name:"",id:"",class:"form-select","onUpdate:modelValue":a=>s.qty=a,onChange:a=>_.updateCart(s),disabled:s.id===o.loadingItem.id},[(d(),c(h,null,g(20,a=>t("option",{value:a,key:a+"123"},n(a),9,A)),64))],40,V),[[m,s.qty]])])]),t("td",E,n(s.total),1)]))),128)):f("",!0)]),t("tfoot",null,[t("tr",null,[k,t("td",T,n(o.cart.total),1)]),t("tr",null,[D,t("td",R,n(o.cart.final_total),1)])])])],64)}const B=C(v,[["render",S]]);export{B as default};
